<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¢ ì—°ìˆ˜ì› ì´ìš© ì•ˆë‚´</title>
    <meta name="theme-color" content="#EA1917">
    
    <script>
        function goBack() {
            try {
                if (window.history.length > 1) {
                    window.history.back();
                    return;
                }
            } catch (e) {
                console.log('history.back() ì‹¤íŒ¨:', e);
            }

            try {
                const currentUrl = window.location.href;
                const parentUrl = currentUrl.substring(0, currentUrl.lastIndexOf('/'));
                if (parentUrl && parentUrl !== currentUrl) {
                    window.location.href = parentUrl;
                    return;
                }
            } catch (e) {
                console.log('ìƒìœ„ í´ë” ì´ë™ ì‹¤íŒ¨:', e);
            }

            try {
                window.location.href = '../index.html';
            } catch (e) {
                console.log('index.html ì´ë™ ì‹¤íŒ¨:', e);
                window.open('../index.html', '_blank');
            }
        }
    </script>

    <style>
        :root {
            --sk-red: #EA1917;
            --sk-orange: #FF6B35;
            --success: #4CAF50;
            --warning: #FF9800;
            --info: #2196F3;
            --purple: #9C27B0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #fafafa 0%, #f0f0f0 100%);
            color: #333;
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, var(--success) 0%, var(--info) 100%);
            color: white;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .header-content {
            position: relative;
            z-index: 10;
            text-align: center;
        }

        .back-btn {
            position: absolute;
            left: 0;
            top: 0;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            z-index: 9999;
        }

        .title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .subtitle {
            opacity: 0.9;
            font-size: 14px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .loading-indicator {
            text-align: center;
            padding: 40px;
            background: rgba(255,255,255,0.9);
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f0f0f0;
            border-top: 4px solid var(--success);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .data-source-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .source-google {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .source-cache {
            background: rgba(255, 152, 0, 0.1);
            color: var(--warning);
            border: 1px solid var(--warning);
        }

        .source-default {
            background: rgba(156, 39, 176, 0.1);
            color: var(--purple);
            border: 1px solid var(--purple);
        }

        .center-info-card {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.06);
            text-align: center;
            border-left: 4px solid var(--success);
        }

        .center-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        .center-name {
            font-size: 20px;
            font-weight: 600;
            color: var(--success);
            margin-bottom: 8px;
        }

        .center-address {
            font-size: 14px;
            color: #666;
            user-select: text;
        }

        .info-section {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.06);
            border-left: 4px solid var(--success);
        }

        .info-section.my-team {
            border-left-color: var(--sk-red);
        }

        .info-section.facilities {
            border-left-color: var(--info);
        }

        .info-section.amenities {
            border-left-color: var(--warning);
        }

        .info-section.contact {
            border-left-color: var(--purple);
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--success);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-section.my-team .section-title {
            color: var(--sk-red);
        }

        .info-section.facilities .section-title {
            color: var(--info);
        }

        .info-section.amenities .section-title {
            color: var(--warning);
        }

        .info-section.contact .section-title {
            color: var(--purple);
        }

        .team-badge {
            display: inline-block;
            background: var(--sk-red);
            color: white;
            padding: 8px 16px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .map-container {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px dashed #ddd;
        }

        /* ì´ë¯¸ì§€ê°€ ìˆì„ ë•Œ ìŠ¤íƒ€ì¼ ë³€ê²½ */
        .map-container img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 12px;
        }

        /* ì´ë¯¸ì§€ê°€ ìˆì„ ë•ŒëŠ” ì ì„  í…Œë‘ë¦¬ ì œê±° */
        .map-container:has(img) {
            border: 1px solid rgba(255,255,255,0.2);
        }

        .map-placeholder {
            color: #666;
            font-size: 1.1em;
            margin-bottom: 12px;
        }

        .map-highlight {
            background: rgba(234, 25, 23, 0.1);
            border: 1px solid var(--sk-red);
            border-radius: 8px;
            padding: 8px 16px;
            font-weight: 600;
            color: #c62828;
            font-size: 14px;
        }


        .facility-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
        }

        .facility-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .facility-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            background: rgba(255, 255, 255, 0.9);
        }

        .facility-icon {
            font-size: 24px;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .facility-content {
            flex: 1;
        }

        .facility-name {
            font-weight: 600;
            margin-bottom: 4px;
            color: #333;
            user-select: text;
        }

        .facility-info {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
            user-select: text;
        }

        .facility-hours {
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid var(--success);
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 13px;
            color: #2e7d32;
            font-weight: 500;
        }

        .facility-note {
            background: rgba(255, 152, 0, 0.1);
            border: 1px solid var(--warning);
            border-radius: 8px;
            padding: 8px 12px;
            margin-top: 8px;
            font-size: 13px;
            color: #e65100;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .contact-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.2);
            background: rgba(255, 255, 255, 0.9);
        }

        .contact-icon {
            font-size: 24px;
            color: var(--purple);
            flex-shrink: 0;
        }

        .contact-details {
            flex: 1;
        }

        .contact-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .contact-phone {
            font-size: 14px;
            color: var(--purple);
            font-weight: 500;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 16px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 10000;
            animation: slideInRight 0.3s ease;
        }

        .toast.success {
            background: var(--success);
        }

        .toast.warning {
            background: var(--warning);
        }

        .toast.error {
            background: #f44336;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }

            .info-section {
                padding: 20px;
                margin-bottom: 16px;
            }

            .title {
                font-size: 20px;
            }

            .map-container img {
                border-radius: 4px;
            }

            .facility-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .contact-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .facility-item {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <button class="back-btn" onclick="goBack()">â† ë’¤ë¡œê°€ê¸°</button>
            <div class="title">ğŸ¢ ì—°ìˆ˜ì› ì´ìš© ì•ˆë‚´</div>
            <div class="subtitle">ì‹œì„¤ ìœ„ì¹˜ ë° ì´ìš© ë°©ë²• ê°€ì´ë“œ</div>
        </div>
    </div>

    <div class="container">
        <!-- ë¡œë”© ì¸ë””ì¼€ì´í„° -->
        <div class="loading-indicator" id="loading">
            <div class="loading-spinner"></div>
            <div>ì—°ìˆ˜ì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        </div>

        <!-- í˜„ì¬ ì„ íƒëœ ì—°ìˆ˜ì› ì •ë³´ + ë‚´ ë¶„ê³¼ ì •ë³´ -->
        <div class="center-info-card" id="center-info" style="display: none;">
            <!-- ì—°ìˆ˜ì› ì •ë³´ê°€ ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
        </div>

        <!-- ì „ì²´ ë§µ -->
        <div class="info-section facilities" id="map-section" style="display: none;">
            <div class="section-title">
                <span>ğŸ—ºï¸</span>
                ì—°ìˆ˜ì› ì „ì²´ ë§µ
            </div>
            
            <div class="map-container">
                <div class="map-placeholder">
                    ğŸ“ ì—°ìˆ˜ì› ê±´ë¬¼ ë°°ì¹˜ë„
                    <div style="font-size: 0.9em; margin-top: 8px; opacity: 0.7;">
                        (ì‹¤ì œ êµ¬í˜„ ì‹œ ì¸í„°ë™í‹°ë¸Œ ë§µ ë˜ëŠ” ì´ë¯¸ì§€)
                    </div>
                </div>
                <div class="map-highlight" id="map-highlight">
                    ë‚´ ìœ„ì¹˜ë¥¼ í™•ì¸ ì¤‘...
                </div>
            </div>
        </div>

        <!-- í¸ì˜ì‹œì„¤ ì´ìš©ì•ˆë‚´ -->
        <div class="info-section amenities" id="amenities-section" style="display: none;">
            <div class="section-title">
                <span>ğŸ¯</span>
                í¸ì˜ì‹œì„¤ ì•ˆë‚´
            </div>
            
            <div class="facility-grid" id="amenities-grid">
                <!-- í¸ì˜ì‹œì„¤ ì •ë³´ê°€ ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- ì—°ë½ì²˜ ì •ë³´ -->
        <div class="info-section contact" id="contact-section" style="display: none;">
            <div class="section-title">
                <span>ğŸ“</span>
                ì—°ìˆ˜ì› ì—°ë½ì²˜
            </div>
            
            <div class="contact-grid" id="contact-list">
                <!-- ì—°ë½ì²˜ê°€ ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <script>
        // =====================================================
        // êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™ ê´€ë¦¬ í´ë˜ìŠ¤
        // =====================================================
        class FacilityDataManager {
            constructor() {
                this.APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyvkEufshC8wwQwMqO5nJsdhhUC6EvBqKkeXVR5YF5cQnnPLUG3oo5d0eObTVkjN55Y/exec';
            }

            // Setupì—ì„œ ì—°ìˆ˜ì› ë° ë¶„ê³¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
            getSetupInfo() {
                try {
                    // sk-mentor-info ìš°ì„  í™•ì¸
                    const mentorInfo = localStorage.getItem('sk-mentor-info');
                    if (mentorInfo && mentorInfo !== 'null') {
                        const parsed = JSON.parse(mentorInfo);
                        if (parsed.trainingCenter && parsed.teamNumber) {
                            console.log('âœ… sk-mentor-infoì—ì„œ ë°œê²¬:', parsed.trainingCenter, parsed.teamNumber);
                            return {
                                trainingCenter: parsed.trainingCenter.toLowerCase(),
                                teamNumber: parseInt(parsed.teamNumber)
                            };
                        }
                    }
                    
                    // ë°©ë²• 1: ì§ì ‘ ì €ì¥ëœ ê°’ í™•ì¸
                    const selectedCenter = localStorage.getItem('selectedCenter');
                    console.log('ğŸ“‹ selectedCenter ê°’:', selectedCenter);
                    
                    let trainingCenter = null;
                    let teamNumber = null; // ê¸°ë³¸ê°’ì„ nullë¡œ ë³€ê²½
                    
                    if (selectedCenter && selectedCenter !== 'null' && selectedCenter !== '') {
                        trainingCenter = selectedCenter;
                        console.log('âœ… selectedCenterì—ì„œ ì—°ìˆ˜ì› ì •ë³´ ë°œê²¬:', selectedCenter);
                    } else {
                        // ë°©ë²• 2: ê¸°ì¡´ setupData í™•ì¸
                        const setupData = localStorage.getItem('mentorSetup');
                        console.log('ğŸ“‹ mentorSetup ì›ë³¸ ë°ì´í„°:', setupData);
                        
                        if (setupData && setupData !== 'null') {
                            const setup = JSON.parse(setupData);
                            console.log('ğŸ“Š íŒŒì‹±ëœ setup ê°ì²´:', setup);
                            
                            if (setup.trainingCenter) {
                                trainingCenter = setup.trainingCenter;
                                console.log('âœ… mentorSetupì—ì„œ ì—°ìˆ˜ì› ì •ë³´ ë°œê²¬:', setup.trainingCenter);
                            }
                            
                            if (setup.teamNumber) {
                                teamNumber = setup.teamNumber;
                                console.log('âœ… mentorSetupì—ì„œ ë¶„ê³¼ ì •ë³´ ë°œê²¬:', setup.teamNumber);
                            }
                        }
                    }
                    
                    if (!trainingCenter) {
                        console.log('âš ï¸ Setupì—ì„œ ì—°ìˆ˜ì› ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ. ê¸°ë³¸ê°’(icheon) ì‚¬ìš©');
                        trainingCenter = 'icheon';
                    }
                    
                    return { trainingCenter, teamNumber };
                    
                } catch (e) {
                    console.error('âŒ Setup ë°ì´í„° ì½ê¸° ì‹¤íŒ¨:', e);
                    return { trainingCenter: 'icheon', teamNumber: null };
                }
            }

            // êµ¬ê¸€ ì‹œíŠ¸ì—ì„œ ì—°ìˆ˜ì› ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
            async fetchFromGoogleSheets() {
                try {
                    console.log('ğŸ”„ êµ¬ê¸€ ì‹œíŠ¸ ì—°ê²° ì‹œë„...');
                    console.log('ğŸ“¡ ìš”ì²­ URL:', this.APPS_SCRIPT_URL + '?action=getTrainingCenters');
                    
                    const response = await fetch(this.APPS_SCRIPT_URL + '?action=getTrainingCenters', {
                        method: 'GET',
                        mode: 'cors',
                        headers: {
                            'Accept': 'application/json',
                        }
                    });
                    
                    console.log('ğŸ“Š ì‘ë‹µ ìƒíƒœ:', response.status, response.statusText);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    const responseText = await response.text();
                    console.log('ğŸ“„ ì›ë³¸ ì‘ë‹µ í…ìŠ¤íŠ¸:', responseText);
                    
                    const data = JSON.parse(responseText);
                    console.log('âœ… íŒŒì‹±ëœ JSON ë°ì´í„°:', data);
                    
                    if (data.error) {
                        throw new Error(`ì•±ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ ì˜¤ë¥˜: ${data.error}`);
                    }
                    
                    return this.parseSheetData(data);
                    
                } catch (error) {
                    console.error('âŒ êµ¬ê¸€ ì‹œíŠ¸ ì—°ê²° ì‹¤íŒ¨:', error);
                    return null;
                }
            }

            // ì‹œíŠ¸ ë°ì´í„° íŒŒì‹±
            parseSheetData(data) {
                console.log('ğŸ”„ ì‹œíŠ¸ ë°ì´í„° íŒŒì‹± ì‹œì‘...');
                const centers = {};
                
                if (!Array.isArray(data)) {
                    console.error('âŒ ë°ì´í„°ê°€ ë°°ì—´ì´ ì•„ë‹˜:', typeof data, data);
                    return null;
                }
                
                console.log(`ğŸ“Š ì´ ${data.length}ê°œ í–‰ ì²˜ë¦¬ ì˜ˆì •`);
                
                data.forEach((row, index) => {
                    try {
                        console.log(`ğŸ” í–‰ ${index + 1} ì²˜ë¦¬ ì¤‘:`, row);
                        
                        const {
                            er_id,
                            center_name,
                            address,
                            emergency_phone,
                            wifi_ssid,
                            wifi_password,
                            operations_name,
                            operations_phone,
                            mentor_support_name,
                            mentor_support_phone,
                            enabled
                        } = row;
                        
                        console.log(`  ğŸ“‹ er_id: ${er_id}, enabled: ${enabled}`);
                        
                        if (!er_id || enabled !== true) {
                            console.log(`  â­ï¸ í–‰ ${index + 1} ìŠ¤í‚µë¨ (er_id: ${er_id}, enabled: ${enabled})`);
                            return;
                        }
                        
                        centers[er_id] = {
                            name: center_name || this.getDefaultCenterName(er_id),
                            address: address || 'ì£¼ì†Œ ì •ë³´ ì—†ìŒ',
                            wifi: {
                                ssid: wifi_ssid || 'Wi-Fi ì •ë³´ ì—†ìŒ',
                                password: wifi_password || 'N/A'
                            },
                            contacts: [
                                {
                                    icon: "ğŸ‘¨â€ğŸ’¼",
                                    name: operations_name ? `ìš´ì˜ì§„ ëŒ€í‘œ (${operations_name})` : "ìš´ì˜ì§„ ëŒ€í‘œ",
                                    phone: operations_phone || 'N/A'
                                },
                                {
                                    icon: "ğŸ“‹",
                                    name: mentor_support_name ? `ë©˜í†  ì§€ì› (${mentor_support_name})` : "ë©˜í†  ì§€ì›",
                                    phone: mentor_support_phone || 'N/A'
                                },
                                {
                                    icon: "ğŸš¨",
                                    name: "ì—°ìˆ˜ì› ë¬¸ì˜",
                                    phone: emergency_phone || 'N/A'
                                }
                            ]
                        };
                        
                        console.log(`  âœ… ${er_id} ì—°ìˆ˜ì› ë°ì´í„° íŒŒì‹± ì™„ë£Œ`);
                        
                    } catch (parseError) {
                        console.error(`âŒ í–‰ ${index + 1} íŒŒì‹± ì‹¤íŒ¨:`, parseError, row);
                    }
                });
                
                console.log('ğŸ¯ ìµœì¢… íŒŒì‹±ëœ ì—°ìˆ˜ì› ë°ì´í„°:', centers);
                return centers;
            }

            async fetchFacilityMapping() {
                try {
                    const response = await fetch('https://script.google.com/macros/s/AKfycbyvkEufshC8wwQwMqO5nJsdhhUC6EvBqKkeXVR5YF5cQnnPLUG3oo5d0eObTVkjN55Y/exec?action=getfacilityMapping');
                    const json = await response.json();
                    
                    // ë°°ì—´ì„ ê°ì²´ë¡œ ë³€í™˜
                    const mapping = {};
                    json.forEach(item => {
                        if (!mapping[item.center_id]) {
                            mapping[item.center_id] = {};
                        }
                        mapping[item.center_id][item.team_number] = {
                            lectureHall: item.lecture_hall,
                            teamRoom: item.team_room
                        };
                    });
                    
                    console.log('ğŸ“Š ë³€í™˜ëœ ë¶„ê³¼ ë§¤í•‘:', mapping);
                    return mapping;
                    
                } catch (error) {
                    console.warn('âŒ facilityMapping ë¡œë“œ ì‹¤íŒ¨:', error);
                    return null;
                }
            }


            // ê¸°ë³¸ ì—°ìˆ˜ì› ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
            getDefaultCenterName(centerId) {
                const names = {
                    'icheon': 'ì´ì²œ SKTì¸ì¬ê°œë°œì›',
                    'yongin': 'ìš©ì¸ SKì•„ì¹´ë°ë¯¸',
                    'incheon': 'ì¸ì²œ SKë¬´ì˜ì—°ìˆ˜ì›'
                };
                return names[centerId] || `${centerId} ì—°ìˆ˜ì›`;
            }

            // ìºì‹œì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
            getFromCache() {
                try {
                    const cachedData = localStorage.getItem('facility-centers-backup');
                    const cacheTime = localStorage.getItem('facility-centers-backup-time');
                    
                    if (!cachedData) {
                        throw new Error('ìºì‹œ ë°ì´í„° ì—†ìŒ');
                    }
                    
                    // ìºì‹œ ë§Œë£Œ í™•ì¸ (5ë¶„)
                    if (cacheTime && Date.now() - parseInt(cacheTime) > 5 * 60 * 1000) {
                        console.warn('â° ìºì‹œ ë°ì´í„° ë§Œë£Œë¨');
                        // ë§Œë£Œë˜ì–´ë„ ë°˜í™˜ (ì˜¤í”„ë¼ì¸ì—ì„œëŠ” ì˜¤ë˜ëœ ë°ì´í„°ë¼ë„ ìœ ìš©)
                    }
                    
                    console.log('ğŸ’¾ ìºì‹œì—ì„œ ì—°ìˆ˜ì› ë°ì´í„° ë¡œë“œ');
                    return JSON.parse(cachedData);
                    
                } catch (error) {
                    console.warn('âš ï¸ ìºì‹œ ë¡œë“œ ì‹¤íŒ¨:', error.message);
                    return null;
                }
            }

            // ìºì‹œì— ë°ì´í„° ì €ì¥
            saveToCache(data) {
                try {
                    localStorage.setItem('facility-centers-backup', JSON.stringify(data));
                    localStorage.setItem('facility-centers-backup-time', Date.now().toString());
                    console.log('ğŸ’¾ ì—°ìˆ˜ì› ë°ì´í„° ìºì‹œ ì €ì¥ ì™„ë£Œ');
                } catch (error) {
                    console.warn('âš ï¸ ìºì‹œ ì €ì¥ ì‹¤íŒ¨:', error.message);
                }
            }

            // 3ë‹¨ê³„ fallbackìœ¼ë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
            async getData() {
                try {
                    // 1ë‹¨ê³„: êµ¬ê¸€ì‹œíŠ¸ì—ì„œ ê°€ì ¸ì˜¤ê¸°
                    console.log('ğŸ“¡ êµ¬ê¸€ì‹œíŠ¸ì—ì„œ ì—°ìˆ˜ì› ë°ì´í„° ìš”ì²­...');
                    const sheetData = await this.fetchFromGoogleSheets();
                    
                    if (sheetData && Object.keys(sheetData).length > 0) {
                        console.log('âœ… êµ¬ê¸€ì‹œíŠ¸ì—ì„œ ë°ì´í„° ë¡œë“œ ì„±ê³µ');
                        this.saveToCache(sheetData);
                        return { data: sheetData, source: 'google' };
                    }
                    
                    throw new Error('êµ¬ê¸€ì‹œíŠ¸ ë°ì´í„° ì—†ìŒ');
                    
                } catch (error) {
                    console.warn(`âš ï¸ êµ¬ê¸€ì‹œíŠ¸ ì—°ê²° ì‹¤íŒ¨, ìºì‹œ í™•ì¸ ì¤‘... (${error.message})`);
                    
                    try {
                        // 2ë‹¨ê³„: ìºì‹œì—ì„œ ê°€ì ¸ì˜¤ê¸°
                        const cachedData = this.getFromCache();
                        if (cachedData && Object.keys(cachedData).length > 0) {
                            console.log('ğŸ’¾ ìºì‹œì—ì„œ ë°ì´í„° ë¡œë“œ ì„±ê³µ');
                            return { data: cachedData, source: 'cache' };
                        }
                        
                        throw new Error('ìºì‹œ ë°ì´í„° ì—†ìŒ');
                        
                    } catch (cacheError) {
                        console.warn(`âš ï¸ ìºì‹œë„ ì‹¤íŒ¨, ê¸°ë³¸ ë°ì´í„° ì‚¬ìš©... (${cacheError.message})`);
                        
                        // 3ë‹¨ê³„: ê¸°ë³¸ í•˜ë“œì½”ë”© ë°ì´í„° ì‚¬ìš©
                        return { data: this.getDefaultData(), source: 'default' };
                    }
                }
            }

            // ê¸°ë³¸ í•˜ë“œì½”ë”© ë°ì´í„° (ìµœí›„ ìˆ˜ë‹¨)
            getDefaultData() {
                console.log('ğŸ“„ ê¸°ë³¸ í•˜ë“œì½”ë”© ë°ì´í„° ì‚¬ìš©');
                return {
                    'icheon': {
                        name: 'ì´ì²œ SKTì¸ì¬ê°œë°œì›',
                        address: 'ê²½ê¸° ì´ì²œì‹œ ë§ˆì¥ë©´ ì„œì´ì²œë¡œ 481-28',
                        wifi: {
                            ssid: 'FMI',
                            password: 'ë¬¸ì˜ ì‹œ ì•ˆë‚´'
                        },
                        contacts: [
                            { icon: "ğŸ‘¨â€ğŸ’¼", name: "ìš´ì˜ì§„ ëŒ€í‘œ", phone: "010-2360-1145" },
                            { icon: "ğŸ“‹", name: "ë©˜í†  ì§€ì›", phone: "010-9235-5562" },
                            { icon: "ğŸš¨", name: "ì¤‘ì•™ í†µì œì‹¤", phone: "031-630-8914" }
                        ]
                    },
                    'yongin': {
                        name: 'ìš©ì¸ SKì•„ì¹´ë°ë¯¸',
                        address: 'ê²½ê¸°ë„ ìš©ì¸ì‹œ ì²˜ì¸êµ¬ ì›ì‚¼ë©´ ëª¨ë˜ì‹¤ë¡œ 17',
                        wifi: {
                            ssid: 'SK_Academy',
                            password: 'ë¬¸ì˜ ì‹œ ì•ˆë‚´'
                        },
                        contacts: [
                            { icon: "ğŸ‘¨â€ğŸ’¼", name: "ìš´ì˜ì§„ ëŒ€í‘œ", phone: "010-2386-2376" },
                            { icon: "ğŸ“‹", name: "ë©˜í†  ì§€ì›", phone: "010-4567-8901" },
                            { icon: "ğŸš¨", name: "ìˆ™ì†Œ ë¬¸ì˜", phone: "031-329-9119" }
                        ]
                    },
                    'incheon': {
                        name: 'ì¸ì²œ SKë¬´ì˜ì—°ìˆ˜ì›',
                        address: 'ì¸ì²œì‹œ ì¤‘êµ¬ ëŒ€ë¬´ì˜ë¡œ 159',
                        wifi: {
                            ssid: 'SK_Academy',
                            password: 'ë¬¸ì˜ ì‹œ ì•ˆë‚´'
                        },
                        contacts: [
                            { icon: "ğŸ‘¨â€ğŸ’¼", name: "ìš´ì˜ì§„ ëŒ€í‘œ", phone: "032-750-8000" },
                            { icon: "ğŸ“‹", name: "ë©˜í†  ì§€ì›", phone: "032-750-8010" },
                            { icon: "ğŸš¨", name: "ì‘ê¸‰ ì—°ë½ì²˜", phone: "032-750-8020" }
                        ]
                    }
                };
            }
        }

        // =====================================================
        // ë¶„ê³¼ë³„ ê°•ì˜ì¥ ë°ì´í„° (í•˜ë“œì½”ë”© - ì¶”í›„ êµ¬ê¸€ì‹œíŠ¸ ì—°ë™ ì˜ˆì •)
        // =====================================================
        const facilityMapping = {
            icheon: {
                1: { lectureHall: 'ì°½ì¡°ê´€ 401í˜¸', teamRoom: 'ì°½ì¡°ê´€ 401í˜¸' },
                2: { lectureHall: 'ì°½ì¡°ê´€ 401í˜¸', teamRoom: 'ì°½ì¡°ê´€ 403í˜¸' },
                3: { lectureHall: 'ì°½ì¡°ê´€ 401í˜¸', teamRoom: 'ì°½ì¡°ê´€ 404í˜¸' },
                4: { lectureHall: 'ì°½ì¡°ê´€ 301í˜¸', teamRoom: 'ì°½ì¡°ê´€ 407í˜¸' },
                5: { lectureHall: 'ì°½ì¡°ê´€ 301í˜¸', teamRoom: 'ì°½ì¡°ê´€ 301í˜¸' },
                6: { lectureHall: 'ì°½ì¡°ê´€ 301í˜¸', teamRoom: 'ì°½ì¡°ê´€ 305í˜¸' },
                7: { lectureHall: 'ì°½ì¡°ê´€ 201í˜¸', teamRoom: 'ì°½ì¡°ê´€ 307í˜¸' },
                8: { lectureHall: 'ì°½ì¡°ê´€ 201í˜¸', teamRoom: 'ì°½ì¡°ê´€ 308í˜¸' },
                9: { lectureHall: 'ì°½ì¡°ê´€ 201í˜¸', teamRoom: 'ì°½ì¡°ê´€ 201í˜¸' },
                10: { lectureHall: 'ê²½ì˜ê´€ 401í˜¸', teamRoom: 'ì°½ì¡°ê´€ 205í˜¸' },
                11: { lectureHall: 'ê²½ì˜ê´€ 401í˜¸', teamRoom: 'ì°½ì¡°ê´€ 210í˜¸' },
                12: { lectureHall: 'ê²½ì˜ê´€ 401í˜¸', teamRoom: 'ê²½ì˜ê´€ 401í˜¸' },
                13: { lectureHall: 'ê²½ì˜ê´€ 301í˜¸', teamRoom: 'ê²½ì˜ê´€ 301í˜¸' },
                14: { lectureHall: 'ê²½ì˜ê´€ 301í˜¸', teamRoom: 'íŒ¨ê¸°ê´€ 107í˜¸' },
                15: { lectureHall: 'ê²½ì˜ê´€ 301í˜¸', teamRoom: 'íŒ¨ê¸°ê´€ 108í˜¸' }
            },
            yongin: {
                1: { lectureHall: 'ê²½ì˜ê´€ 1F Vision Hall 1', teamRoom: 'ê²½ì˜ê´€ 101í˜¸' },
                2: { lectureHall: 'ê²½ì˜ê´€ 1F Vision Hall 1', teamRoom: 'ê²½ì˜ê´€ 102í˜¸' },
                3: { lectureHall: 'ê²½ì˜ê´€ 1F Vision Hall 1', teamRoom: 'ê²½ì˜ê´€ 103í˜¸' },
                4: { lectureHall: 'ê²½ì˜ê´€ 2F Vision Hall 2', teamRoom: 'ê²½ì˜ê´€ 104í˜¸' },
                5: { lectureHall: 'ê²½ì˜ê´€ 2F Vision Hall 2', teamRoom: 'ê²½ì˜ê´€ 201í˜¸' },
                6: { lectureHall: 'ê²½ì˜ê´€ 2F Vision Hall 2', teamRoom: 'ê²½ì˜ê´€ 202í˜¸' },
                7: { lectureHall: 'ì¸ì¬ê´€ Future Hall', teamRoom: 'ê²½ì˜ê´€ 203í˜¸' },
                8: { lectureHall: 'ì¸ì¬ê´€ Future Hall', teamRoom: 'ê²½ì˜ê´€ 204í˜¸' },
                9: { lectureHall: 'ì¸ì¬ê´€ Future Hall', teamRoom: 'ì¸ì¬ê´€ 101í˜¸' },
                10: { lectureHall: 'ì¸ì¬ê´€ Innovation Hall', teamRoom: 'ì¸ì¬ê´€ 102í˜¸' },
                11: { lectureHall: 'ì¸ì¬ê´€ Innovation Hall', teamRoom: 'ì¸ì¬ê´€ 103í˜¸' },
                12: { lectureHall: 'ì¸ì¬ê´€ Innovation Hall', teamRoom: 'ì¸ì¬ê´€ 104í˜¸' },
                13: { lectureHall: 'ì¸ì¬ê´€ Challenge Hall', teamRoom: 'ì¸ì¬ê´€ 105í˜¸' },
                14: { lectureHall: 'ì¸ì¬ê´€ Challenge Hall', teamRoom: 'ì¸ì¬ê´€ 106í˜¸' },
                15: { lectureHall: 'ì¸ì¬ê´€ Challenge Hall', teamRoom: 'ì¸ì¬ê´€ Challenge Hall' }
            }
        };

        // =====================================================
        // í•˜ë“œì½”ë”©ëœ í¸ì˜ì‹œì„¤ ë°ì´í„° (ê³ ì •ê°’)
        // =====================================================
        const staticAmenitiesData = {
            'icheon': {
                icon: 'ğŸ¢',
                amenities: [
                    {
                        icon: "ğŸƒâ€â™‚ï¸",
                        name: "Actium (ì²´ìœ¡ê´€)",
                        info: "íŒ¨ê¸°ê´€ ì§€í•˜1ì¸µ",
                        hours: "07:00~22:00",
                        note: "ìŒì‹ë¬¼ ë°˜ì… ë° ì·¨ì‹ ê¸ˆì§€"
                    },
                    {
                        icon: "ğŸš¿",
                        name: "ì‚¬ìš°ë‚˜",
                        info: "íŒ¨ê¸°ê´€ ì§€í•˜1ì¸µ",
                        hours: "07:00~08:30, 18:00~22:00"
                    },
                    {
                        icon: "ğŸ‘•",
                        name: "ì„¸íƒì‹¤",
                        info: "íŒ¨ê¸°ê´€ ì§€í•˜2ì¸µ",
                        hours: "20:00 ì´í›„ ì´ìš© ê°€ëŠ¥",
                        note: "ì‹ ì…êµ¬ì„±ì›ì€ ë¬¸ì˜ìì— í•œí•´ ì•ˆë‚´"
                    },
                    {
                        icon: "ğŸª",
                        name: "í–‰ë³µë§ˆíŠ¸(CU)",
                        info: "íŒ¨ê¸°ê´€ ì§€í•˜1ì¸µ",
                        hours: "10:00~21:00"
                    },
                    {
                        icon: "ğŸ½ï¸",
                        name: "ì‹ë‹¹",
                        info: "íŒ¨ê¸°ê´€ ì§€í•˜1ì¸µ",
                        hours: "ì¡°ì‹ 07:30~08:30, ì¤‘ì‹ 12:00~13:00, ì„ì‹ 18:00~19:00"
                    },
                    {
                        icon: "ğŸ“‹",
                        name: "ìš´ì˜ì‹¤",
                        info: "íŒ¨ê¸°ê´€ 1ì¸µ 106í˜¸",
                        hours: "ìƒì‹œ ìš´ì˜",
                        note: "105í˜¸ ì§ ë³´ê´€ì¥ì†Œ ì˜†"
                    },
                    {
                        icon: "ğŸ›ï¸",
                        name: "ìˆ™ì†Œ",
                        info: "íŒ¨ê¸°ê´€ 1~5ì¸µ",
                        hours: "1ì¼ì°¨ ì¢…ë£Œ í›„ ì…ì‹¤",
                        note: "íƒ€ì¸ ìˆ™ì†Œ ì ˆëŒ€ ì¶œì… ê¸ˆì§€"
                    },
                    {
                        icon: "ğŸ“¶",
                        name: "Wi-Fi",
                        info: "ì—°ìˆ˜ì› ì „ì²´",
                        hours: "T_FMI ì´ìš©",
                        note: "ID: {WIFI_SSID} / PW: {WIFI_PASSWORD}" // ë™ì ìœ¼ë¡œ êµì²´ë¨
                    }
                ]
            },
            'yongin': {
                icon: 'ğŸ«',
                amenities: [
                    {
                        icon: "ğŸƒâ€â™‚ï¸",
                        name: "í—¬ìŠ¤ì¥",
                        info: "í–‰ë³µê´€ ì§€í•˜1ì¸µ",
                        hours: "06:00~22:00"
                    },
                    {
                        icon: "ğŸª",
                        name: "ë¬´ì¸í¸ì˜ì ",
                        info: "í–‰ë³µê´€ ì§€í•˜1ì¸µ",
                        hours: "24ì‹œê°„ ì´ìš© ê°€ëŠ¥"
                    },
                    {
                        icon: "ğŸ®",
                        name: "ë¼ìš´ì§€/ë³´ë“œê²Œì„",
                        info: "í–‰ë³µê´€ ì§€í•˜1ì¸µ",
                        hours: "18:00~23:00"
                    },
                    {
                        icon: "ğŸ²",
                        name: "ë³´ë“œê²Œì„ ëŒ€ì—¬",
                        info: "ê²½ì˜ê´€ 1ì¸µ",
                        hours: "18:00~22:00",
                        note: "ëŒ€ì—¬ì¥ë¶€ ê¸°ì… í›„ ë¶„ê³¼ì¥ ë‚´ ì´ìš©"
                    },
                    {
                        icon: "ğŸ½ï¸",
                        name: "ì‹ë‹¹",
                        info: "ê²½ì˜ê´€ 1ì¸µ",
                        hours: "ì¡°ì‹ 07:30~08:30, ì¤‘ì‹ 12:00~13:00, ì„ì‹ 18:00~19:00"
                    },
                    {
                        icon: "ğŸ“¶",
                        name: "Wi-Fi",
                        info: "ì—°ìˆ˜ì› ì „ì²´",
                        hours: "SK_Academy",
                        note: "ID: {WIFI_SSID} / PW: {WIFI_PASSWORD}" // ë™ì ìœ¼ë¡œ êµì²´ë¨
                    }
                ]
            },
            'incheon': {
                icon: 'ğŸŒŠ',
                amenities: [
                    {
                        icon: "ğŸŒŠ",
                        name: "ìì—°í™˜ê²½",
                        info: "ë¬´ì˜ë„ ìœ„ì¹˜",
                        hours: "24ì‹œê°„ ì´ìš© ê°€ëŠ¥",
                        note: "ìì—°ì¹œí™”ì  ì—°ìˆ˜ í™˜ê²½"
                    },
                    {
                        icon: "ğŸ½ï¸",
                        name: "ì‹ë‹¹",
                        info: "í–‰ë³µê´€",
                        hours: "ì¡°ì‹ 7:30~8:30, ì¤‘ì‹ 12:00~13:00, ì„ì‹ 18:00~19:00"
                    },
                    {
                        icon: "ğŸ“¶",
                        name: "Wi-Fi",
                        info: "ì—°ìˆ˜ì› ì „ì²´",
                        hours: "24ì‹œê°„ ì´ìš©",
                        note: "ID: {WIFI_SSID} / PW: {WIFI_PASSWORD}" // ë™ì ìœ¼ë¡œ êµì²´ë¨
                    }
                ]
            }
        };

        // =====================================================
        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        // =====================================================
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideInRight 0.3s ease reverse';
                setTimeout(() => {
                    if (document.body.contains(toast)) {
                        document.body.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        function getDataSourceBadge(source) {
            const badges = {
                'google': '<div class="data-source-badge source-google">âœ… ìµœì‹  ë°ì´í„°</div>',
                'cache': '<div class="data-source-badge source-cache">ğŸ’¾ ìºì‹œ ë°ì´í„°</div>',
                'default': '<div class="data-source-badge source-default">ğŸ“„ ê¸°ë³¸ ë°ì´í„°</div>'
            };
            return badges[source] || '';
        }

        function getSetupInfo() {
            const raw = localStorage.getItem('mentorSetup');
                if (!raw) return { trainingCenter: null, teamNumber: null };

                try {
                    const parsed = JSON.parse(raw);
                    return {
                    trainingCenter: parsed.trainingCenter?.toLowerCase(),
                    teamNumber: Number(parsed.teamNumber)
                    };
                } catch (e) {
                    return { trainingCenter: null, teamNumber: null };
            }
        }

        async function fetchFacilityMapping() {
            try {
                const response = await fetch('https://script.google.com/macros/s/AKfycbyvkEufshC8wwQwMqO5nJsdhhUC6EvBqKkeXVR5YF5cQnnPLUG3oo5d0eObTVkjN55Y/exec?action=getfacilityMapping');
                const json = await response.json();
                return json;
            } catch (error) {
                console.warn('âŒ facilityMapping ë¡œë“œ ì‹¤íŒ¨:', error);
                return null;
            }
        }



        // =====================================================
        // ë©”ì¸ ë¡œë“œ í•¨ìˆ˜
        // =====================================================
        async function loadFacilityInfo() {
            const dataManager = new FacilityDataManager();
            const { trainingCenter: selectedCenter, teamNumber } = dataManager.getSetupInfo();

            console.log('ğŸ¯ ìµœì¢… ì„ íƒëœ ì—°ìˆ˜ì›:', selectedCenter);
            console.log('ğŸ¯ ìµœì¢… ì„ íƒëœ ë¶„ê³¼:', teamNumber);

            try {
                // êµ¬ê¸€ì‹œíŠ¸ì—ì„œ ì—°ìˆ˜ì› ê¸°ë³¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                const { data: centersData, source } = await dataManager.getData();
                console.log(`ğŸ“Š ì‚¬ìš©í•  ì—°ìˆ˜ì› ë°ì´í„° (${source}):`, centersData);

                const centerData = centersData[selectedCenter];
                if (!centerData) {
                throw new Error(`ì—°ìˆ˜ì› ë°ì´í„° ì—†ìŒ: ${selectedCenter}`);
                }

                const staticData = staticAmenitiesData[selectedCenter];
                if (!staticData) {
                throw new Error(`í¸ì˜ì‹œì„¤ ë°ì´í„° ì—†ìŒ: ${selectedCenter}`);
                }

                // âœ… ë¶„ê³¼ ì •ë³´ fetchëŠ” ì „ì²´ try ë°–ì—ì„œ ê°œë³„ ì²˜ë¦¬
                let facilityMappingData = {};
                try {
                facilityMappingData = await dataManager.fetchFacilityMapping();
                } catch (e) {
                console.warn('âš ï¸ ë¶„ê³¼ ì •ë³´ ë¡œë“œ ì‹¤íŒ¨ (ë¬´ì‹œí•˜ê³  ê³„ì† ì§„í–‰):', e);
                }

                // âœ… ë¶„ê³¼ ì •ë³´ê°€ ì—†ìœ¼ë©´ fallback
                const teamInfo = facilityMappingData?.[selectedCenter]?.[teamNumber] ?? {
                lectureHall: 'ì—°ìˆ˜ì› ì—°ê²°ì´ ì›í™œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤',
                teamRoom: 'ì—°ìˆ˜ì› ì—°ê²°ì´ ì›í™œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤'
                };

                // âœ… UI ì—…ë°ì´íŠ¸ëŠ” í•­ìƒ ì‹¤í–‰
                updateUI(centerData, staticData, teamInfo, selectedCenter, teamNumber, source);

                const messages = {
                'google': 'âœ… ìµœì‹  ë°ì´í„°ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤',
                'cache': 'ğŸ’¾ ìºì‹œëœ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤',
                'default': 'ğŸ“„ ê¸°ë³¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤'
                };
                showToast(messages[source], source === 'google' ? 'success' : source === 'cache' ? 'warning' : 'info');

                console.log('âœ… ì—°ìˆ˜ì› ì‹œì„¤ ì •ë³´ ë¡œë“œ ì™„ë£Œ:', selectedCenter, centerData.name);
            } catch (error) {
                console.error('âŒ ì—°ìˆ˜ì› ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);
                showToast('âŒ ë°ì´í„° ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤', 'error');
                hideLoadingAndShowContent();
            }
        }


        function updateUI(centerData, staticData, teamInfo, selectedCenter, teamNumber, source) {
            // ë¡œë”© ìˆ¨ê¸°ê³  ì»¨í…ì¸  í‘œì‹œ
            hideLoadingAndShowContent();
            
            // Wi-Fi ì •ë³´ ë™ì  êµì²´
            const amenitiesWithWifi = staticData.amenities.map(amenity => {
                if (amenity.icon === "ğŸ“¶") {
                    return {
                        ...amenity,
                        note: `ID: ${centerData.wifi.ssid} / PW: ${centerData.wifi.password}`
                    };
                }
                return amenity;
            });
            
            // ì—°ìˆ˜ì› ì •ë³´ ì¹´ë“œ ì—…ë°ì´íŠ¸ (ë¶„ê³¼ ì •ë³´ í¬í•¨)
            const centerInfo = document.getElementById('center-info');
            centerInfo.innerHTML = `
                ${getDataSourceBadge(source)}
                <div class="center-icon">${staticData.icon}</div>
                <div class="center-name">${centerData.name}</div>
                <div class="center-address">${centerData.address}</div>
                <div style="margin-top: 16px; padding: 12px; background: rgba(234, 25, 23, 0.1); border-radius: 8px; border: 1px solid #ea1917;">
                    <div style="font-weight: 600; color: #ea1917; margin-bottom: 8px;">ğŸ“ í˜„ì¬ ì„¤ì •: ${centerData.name} ${teamNumber}ë¶„ê³¼</div>
                    <div style="font-size: 14px; color: #666;">
                        <strong>ì¤‘ê°•ì˜ì¥:</strong> ${teamInfo.lectureHall} | 
                        <strong>ë¶„ê³¼ì¥:</strong> ${teamInfo.teamRoom}
                    </div>
                </div>
            `;
            
            // í¸ì˜ì‹œì„¤ ì—…ë°ì´íŠ¸ (Wi-Fi ì •ë³´ í¬í•¨)
            const amenitiesGrid = document.getElementById('amenities-grid');
            amenitiesGrid.innerHTML = amenitiesWithWifi.map(amenity => `
                <div class="facility-item">
                    <div class="facility-icon">${amenity.icon}</div>
                    <div class="facility-content">
                        <div class="facility-name">${amenity.name}</div>
                        <div class="facility-info">${amenity.info}</div>
                        <div class="facility-hours">${amenity.hours}</div>
                        ${amenity.note ? `<div class="facility-note">ğŸ’¡ ${amenity.note}</div>` : ''}
                    </div>
                </div>
            `).join('');
            
            // ì—°ë½ì²˜ ì—…ë°ì´íŠ¸ (êµ¬ê¸€ì‹œíŠ¸ì—ì„œ ì˜¨ ë™ì  ë°ì´í„°)
            const contactList = document.getElementById('contact-list');
            contactList.innerHTML = centerData.contacts.map(contact => `
                <div class="contact-item">
                    <div class="contact-icon">${contact.icon}</div>
                    <div class="contact-details">
                        <div class="contact-name">${contact.name}</div>
                        <div class="contact-phone">${contact.phone}</div>
                    </div>
                </div>
            `).join('');
            
            // ë§µ ì»¨í…Œì´ë„ˆ ì—…ë°ì´íŠ¸ (ì´ë¯¸ì§€ í¬í•¨)
            const mapContainer = document.querySelector('.map-container');
            if (selectedCenter === 'icheon' || selectedCenter === 'yongin') {
                mapContainer.innerHTML = `
                    <img src="../assets/images/map-${selectedCenter}.png" 
                        alt="${centerData.name} ê±´ë¬¼ ë°°ì¹˜ë„">
                    <div class="map-highlight">ë‚´ ì£¼ìš” í™œë™ ìœ„ì¹˜: ${teamInfo.teamRoom}</div>
                `;
            } else {
                mapContainer.innerHTML = `
                    <div class="map-placeholder">
                        ğŸ“ ì—°ìˆ˜ì› ê±´ë¬¼ ë°°ì¹˜ë„
                        <div style="font-size: 0.9em; margin-top: 8px; opacity: 0.7;">
                            (ì¤€ë¹„ ì¤‘)
                        </div>
                    </div>
                    <div class="map-highlight">ë‚´ ì£¼ìš” í™œë™ ìœ„ì¹˜: ${teamInfo.teamRoom}</div>
                `;
            }
        }

        function hideLoadingAndShowContent() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('center-info').style.display = 'block';
            document.getElementById('map-section').style.display = 'block';
            document.getElementById('amenities-section').style.display = 'block';
            document.getElementById('contact-section').style.display = 'block';
        }

        // =====================================================
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        // =====================================================
        document.addEventListener('DOMContentLoaded', async function() {
            // ì—°ìˆ˜ì› ì •ë³´ ë¡œë“œ
            await loadFacilityInfo();
            
            // ì• ë‹ˆë©”ì´ì…˜
            const sections = document.querySelectorAll('.info-section, .center-info-card');
            sections.forEach((section, index) => {
                section.style.opacity = '0';
                section.style.transform = 'translateY(30px)';
                
                setTimeout(() => {
                    section.style.transition = 'all 0.6s ease';
                    section.style.opacity = '1';
                    section.style.transform = 'translateY(0)';
                }, index * 150);
            });
        });
    </script>
</body>
</html>
